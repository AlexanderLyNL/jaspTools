# JASPTools
R package which aids developers with writing JASP analyses.

## Installation
It is not necessary to install the package; it comes bundled with the fork from [jasp-desktop](https://github.com/jasp-stats/jasp-desktop/).  
To run it in R, simply attach it by calling:

`library(JASPTools, lib.loc="/%path%/jasp-desktop/Tools/")`

Where `/%path%/` refers to the location of jasp-desktop on your pc.  
For example

`library(JASPTools, lib.loc="/Users/tdjong/JASP/Develop/jasp-desktop/Tools")`

It is important that JASPTools is not installed along with your other packages, as it needs resources from the jasp-desktop environment.

## Functionality
At the moment JASPTools has three classes of functions.
Each of these functions has documentation you may view by the usual syntax, e.g., `?run`.

The general classes are:


### 1. Running JASP analyses
- `run`: run a JASP analysis
- `view`: view output of a JASP analysis
- `analysisOptions`: create options used by run

There are two general procedures to running analyses with JASPTools.  
The first procedure uses the .json files to create option lists.
These lists will almost always require further editing.
#### Example 1
```
#create default options
options <- JASPTools::analysisOptions("BinomialTest")

#we want to perform the binomial test on 'contBinom'
options[["variables"]] <- "contBinom"
JASPTools::run("BinomialTest", dataset="debug.csv", options=options)
```

The second procedure uses syntax generated by Qt.  
Just start Qt once, set the options to your liking and copy the syntax from the Qt terminal.
#### Example 2
```
#create options from the Qt json string
options <- JASPTools::analysisOptions('{
   "id" : 4,
   "name" : "BinomialTest",
   "options" : {
      "VovkSellkeMPR" : false,
      "confidenceInterval" : false,
      "confidenceIntervalInterval" : 0.950,
      "descriptivesPlots" : false,
      "descriptivesPlotsConfidenceInterval" : 0.950,
      "hypothesis" : "notEqualToTestValue",
      "plotHeight" : 300,
      "plotWidth" : 160,
      "testValue" : 0.50,
      "variables" : [ "contBinom" ]
   },
   "perform" : "run",
   "revision" : 1,
   "settings" : {
      "ppi" : 192
   }
}')
JASPTools::run("BinomialTest", dataset="debug.csv", options=options)
```

It is not necessary to use a JASP dataset (such as the debug.csv file we showed in the examples), you may provide any data.frame to the dataset argument of the run function.

### 2. Testing JASP analyses
- `testAll`: test all analyses
- `testAnalysis`: test a specific analysis
- `inspectTestPlots`: validate a new plot or inspect differing plots
- `makeTestTable`: change the output of a JASP table to short, testable list

To ensure that no aspects of JASP are accidentally broken, we use unit testing.
These tests check if all tables still produce the same results, plots can be made, errors are caught, etc.
If an analysis is changed, it's a good idea to check that no unit test returns an error.
To this purpose JASPTools offers convenience functions for testing.

### 3. Modifying JASPTools' setup
- `viewPkgOptions`: views settings in the package 
- `setPkgOption`: change a setting in the package (e.g., paths and ppi)

On startup JASPTools will attempt to find all the resources it requires.
An example of one of these resources is the R library that comes bundled with JASP.
All of these resources, as well as some additional options are stored in the pkgOptions.
If you wish to change a resource JASPTools uses you can set it through `setPkgOption`.


## Known limitations:
- Click actions in the browser are not supported (e.g., "save as")
- State and callbacks are ignored
